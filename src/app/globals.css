@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply antialiased;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-white text-apple-gray-900;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Apple-style smooth scrolling */
  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }
  }

  /* Skip to main content link for accessibility */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50;
    @apply focus:px-4 focus:py-2 focus:bg-primary-600 focus:text-white;
    @apply focus:rounded-full focus:font-medium focus:outline-none focus:ring-2 focus:ring-primary-600 focus:ring-offset-2;
  }

  /* Focus visible styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-600 ring-offset-2;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Apple-style glass effect */
  .glass {
    @apply bg-white/80 backdrop-blur-xl;
  }

  .glass-dark {
    @apply bg-apple-gray-900/80 backdrop-blur-xl;
  }

  /* Apple-style button hover effect */
  .apple-button {
    @apply transition-all duration-300 ease-out;
    @apply hover:scale-105 active:scale-95;
  }

  /* Apple-style text gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-apple-gray-900 to-apple-gray-600 bg-clip-text text-transparent;
  }

  /* Background watermark decoration - applied to sections */
  .bg-watermark {
    position: relative;
    overflow: hidden;
  }

  .bg-watermark::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 600px;
    height: 600px;
    background-image: url('/sewing-machine.png');
    background-size: 600px 600px;
    background-position: top right;
    background-repeat: no-repeat;
    opacity: 0.02;
    filter: blur(0.4px);
    transform: translate(10%, -10%) rotate(18deg);
    pointer-events: none;
    z-index: 0;
  }

  /* Mobile responsive watermark */
  @media (max-width: 768px) {
    .bg-watermark::before {
      width: 400px;
      height: 400px;
      background-size: 400px 400px;
      transform: translate(15%, -15%) rotate(18deg);
    }
  }

  @media (max-width: 640px) {
    .bg-watermark::before {
      width: 300px;
      height: 300px;
      background-size: 300px 300px;
      transform: translate(10%, -10%) rotate(18deg);
    }
  }

  @media (max-width: 480px) {
    .bg-watermark::before {
      width: 250px;
      height: 250px;
      background-size: 250px 250px;
      transform: translate(5%, -5%) rotate(18deg);
    }
  }

  /* Ensure content is above watermark */
  .bg-watermark > * {
    position: relative;
    z-index: 1;
  }

  /* Blob animation for decorative backgrounds */
  @keyframes blob {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
  }

  .animate-blob {
    animation: blob 7s infinite;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }
}

/* Custom scrollbar - Apple style */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-apple-gray-50;
}

::-webkit-scrollbar-thumb {
  @apply bg-apple-gray-300 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-apple-gray-400;
}

/* Selection color */
::selection {
  @apply bg-apple-blue/20 text-apple-gray-900;
}

/* Ensure toast notifications appear above everything */
/* Toast z-index must be higher than header z-index (99999999) and modal z-index (100000000) */
/* Toast uses portal to body, modal is in normal React tree */
/* [data-sonner-toaster],
body > [data-sonner-toaster],
body [data-sonner-toaster],
#__next [data-sonner-toaster],
html body [data-sonner-toaster] {
  z-index: 100000001 !important;
  position: fixed !important;
} */

/* Also target individual toast items to ensure they're above everything */
/* [data-sonner-toast],
body > [data-sonner-toaster] [data-sonner-toast],
body [data-sonner-toaster] [data-sonner-toast],
#__next [data-sonner-toaster] [data-sonner-toast],
html body [data-sonner-toaster] [data-sonner-toast] {
  z-index: 100000001 !important;
  position: relative !important;
} */

/* Target the toast container wrapper */
/* [data-sonner-toaster] > *,
body > [data-sonner-toaster] > * {
  z-index: 100000001 !important;
} */